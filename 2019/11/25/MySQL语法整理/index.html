<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="emmm，我花了两天的时间把《MySQL必知必会》过了一遍，因为我记忆力比较差，看完就会忘，所以只能用这种笨方法把它大致写一下留点印象，我这个文章把基本的语法和例子都写了一下（当然表名列名会有乱起的情况…），可以当个查询手册来使用，就用Ctrl+F就好了，我读的pdf版可能不太正规用这种方法检索不到任何信息…在这个手册中，游标、触发器以及事务管理我没有记录，主要是太多了，我太懒了…就这样吧，以后">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL语法整理">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;2019&#x2F;11&#x2F;25&#x2F;MySQL%E8%AF%AD%E6%B3%95%E6%95%B4%E7%90%86&#x2F;index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="emmm，我花了两天的时间把《MySQL必知必会》过了一遍，因为我记忆力比较差，看完就会忘，所以只能用这种笨方法把它大致写一下留点印象，我这个文章把基本的语法和例子都写了一下（当然表名列名会有乱起的情况…），可以当个查询手册来使用，就用Ctrl+F就好了，我读的pdf版可能不太正规用这种方法检索不到任何信息…在这个手册中，游标、触发器以及事务管理我没有记录，主要是太多了，我太懒了…就这样吧，以后">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-11-25T02:16:16.046Z">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/11/25/MySQL语法整理/"/>





  <title>MySQL语法整理 | Hexo</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/25/MySQL%E8%AF%AD%E6%B3%95%E6%95%B4%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kang Liu Rong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">MySQL语法整理</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-25T10:15:40+08:00">
                2019-11-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>emmm，我花了两天的时间把《MySQL必知必会》过了一遍，因为我记忆力比较差，看完就会忘，所以只能用这种笨方法把它大致写一下留点印象，我这个文章把基本的语法和例子都写了一下（当然表名列名会有乱起的情况…），可以当个<strong>查询手册</strong>来使用，就用Ctrl+F就好了，我读的pdf版可能不太正规用这种方法检索不到任何信息…在这个手册中，游标、触发器以及事务管理我没有记录，主要是太多了，我太懒了…就这样吧，以后可能会补充进来。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">USE mysql;选择数据库  </span><br><span class="line">SHOW  databases;返回可用数据库的一个列表（可能有mysql内部使用的一个列表，如mysql和information_schema）  </span><br><span class="line">SHOW tables;获得一个数据库内的表的列表</span><br><span class="line">SHOW COLUMNS from customers;要求给出一个表名（from customers），它用来显示表列  </span><br><span class="line">SHOW COLUMNS=DESCRIBE</span><br><span class="line">SHOW GRANTS显示授予用户的安全权限</span><br><span class="line">```  </span><br><span class="line">## SELECT语句检索单个表列、多个表列以及所有表列</span><br><span class="line">SELECT prod_name FROM products 从products表中检索一个名为prod_name的列  </span><br><span class="line">SELECT prod_id,prod_name,prod_price FROM products检索多个列  </span><br><span class="line">SELECT * FROM products;通过通配符*检索所有的列  </span><br><span class="line">SELECT DISTINCT vend_id FROM products; DISTINCT独特的，通过该关键字返回不同值的行，**必须放在列名前面**，而且它适用于所有的列，不能作用于不同列  </span><br><span class="line">SELECT prod_name FROM products LIMIT 5; 返回不多于5行，LIMIT总是从第一行开始  </span><br><span class="line">SELECT prod_name FROM products LIMIT 5,5;指示mysql返回从行5开始的5行。第一个数为开始位置，第二个数为要检索的行数  </span><br><span class="line">行0 检索出来的第一行为行0而不是行1，因此，LIMIT 1,1检索出第二行而不是第一行  </span><br><span class="line">LIMIT 4 OFFSET 3  = LIMIT 3,4 从行3开始取4行  </span><br><span class="line">SELECT products.prod_name FROM crashcourse.rpoducts;使用完全限定的表名来引用列  </span><br><span class="line">## 排序检索数据（使用ORDER BY子句排序检索出来的数据）</span><br><span class="line">子句（clause)：SQL语句由子句构成，一个关键字+数据 如SELECT语句的FROM ...子句  </span><br><span class="line">---</span><br><span class="line">SELECT prod_name FROM products ORDER BY prod_name;ORDER BY子句指示prod_name列以字母顺序排序  </span><br><span class="line"></span><br><span class="line">SELECT prod_name,prod_price,prod_id FROM products ORDER BY prod_price,prod_name;先按价格排序，如果出现多个**行**价格相同的再按名称排序，**这是按多个列排序**  </span><br><span class="line"></span><br><span class="line">**指定排序方向** 默认升序，从A到Z，用ORDER BY从Z到A降序，指定DESC关键字(descend)  </span><br><span class="line"></span><br><span class="line">SELECT prod_id,prod_price,prod_name FROM products ORDER BY prod_price DESC;  </span><br><span class="line"></span><br><span class="line">**DESC只应用到直接位于其前面的列名，对多个列进行升降序时必须对每个列指定DESC关键字**  </span><br><span class="line"></span><br><span class="line">SELECT prod_id,prod_price,prod_name FROM products ORDER BY prod_price DESC,prod_name;先对产品降序排序，再对产品名排序（默认升序）  </span><br><span class="line"></span><br><span class="line">**ASC(ASCENDING)与DESC相反的关键字，但默认是ASC**  </span><br><span class="line">**在字典排序顺序中，A被视为与a相同**</span><br></pre></td></tr></table></figure>
<p>通过ORDER BY + LIMIT 找出一个列中最高或最低的值<br>SELECT prod_price<br>FROM products<br>ORDER BY prod_price DESC<br>LIMIT 1;//仅返回一行<br>顺序：ORDER BY 必须在FROM 后，LIMIT 必须在ORDER BY 后</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">## 过滤数据(WHERE子句)  在FROM子句后给出</span><br><span class="line">SELECT prod_name,prod_price FROM products WHERE prod_price=2.50;//返回price=2.5的行</span><br></pre></td></tr></table></figure>
<h1 id="WHERE子句操作符"><a href="#WHERE子句操作符" class="headerlink" title="WHERE子句操作符"></a>WHERE子句操作符</h1><p>&lt;&gt;不等于<br>!=不等于<br>&lt;<br>&lt;=</p>
<blockquote>
<p>=<br>BETWEEN在指定的两个值之间</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT prod_name,prod_price FROM products WHERE prod_name=&apos;fuses&apos;; **检查WHERE prod_name=&apos;fuses&apos;子句时，默认不区分大小写，fuses可与Fuses匹配**  </span><br><span class="line">SELECT prod_id,prod_price FROM products WHERE prod_id &lt;&gt;1003;列出不是由供应商1003制造的所有产品  </span><br><span class="line">SELECT prod_name,prod_price FROM products BETWEEN 5 AND 10; BETWEEN匹配范围中所有的值，包括指定的开始值和结束值  </span><br><span class="line">**空值检查**在一个列不包含值时，称其为包含空值NULL  </span><br><span class="line">**NULL 无值(no value)**它与字段包含0，空字符串，空格 不同  </span><br><span class="line">SELECT prod_name FROM products WHERE prod_price IS NULL; IS NULL子句用来检查具有NULL值的列  </span><br><span class="line"></span><br><span class="line">## 数据过滤（NOT IN 操作符）</span><br><span class="line">操作符：用来联结或改变WHERE子句中的子句的关键字</span><br><span class="line">1. AND操作符</span><br></pre></td></tr></table></figure>
<p>SELECT prod_id,prod_price,prod_name FROM products WHERE vend_id=1003 AND prod_price&lt;=10;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2. OR操作符</span><br></pre></td></tr></table></figure>
<p>SELECT prod_name,prod_price FROM products WHERE vend_id=1003 OR vend_id=1002;//OR操作符匹配任一条件的行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3. 优先级AND&gt;OR</span><br></pre></td></tr></table></figure>
<p>SELECT prod_name,prod_price FROM products WHERE vend_id=1002 OR vend_id=1003 AND prod_price&gt;=10;<br>被理解成了id=1003且价格大于10的产品  和  id1002的产品<br>用（）解决<br>SELECT prod_name,prod_price FROM products WHERE (vend_id=1002 OR vend_id=1003) AND prod_price&gt;=10;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4. IN(指定条件范围)</span><br></pre></td></tr></table></figure>
<p>SELECT prod_name,prod_price FROM products WHERE vend_id IN (1002,1003) ORDER BY prod_name;</p>
<p>IN与OR完成相同的功能，但IN更好，IN能包含其他SELECT语句</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5. NOT(否定它之后的任何条件) WHERE子句中用来否定后跟条件的关键字</span><br></pre></td></tr></table></figure>
<p>SELECT prod_name,prod_price FROM products WHERE vend_id NOT IN (1002,1003) ORDER BY prod_name;<br>MySQL支持对IN,BETWEEN,EXISTS子句取反</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 用通配符进行过滤（LIKE操作符）</span><br></pre></td></tr></table></figure>
<p>wildcard 用来匹配值的一部分的特殊字符<br>search pattern 由字面值、通配符或两者组合构成的搜索条件<br>LIKE是谓词predicate而不是操作符，虽然最终的结果是相同的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1. %通配符</span><br></pre></td></tr></table></figure>
<p>表示任何字符出现任意次数<br>SELECT prod_id,prod_name FROM products WHERE prod_name LIKE ‘jet%’;结果可以是jet123…,只要开头是jet就行<br>MySQL可以区分大小写<br>%jet%<br>s%e以s开头e结尾<br>%还能匹配0个字符，0，1，。。。多个字符<br>尾空格可能会干扰通配符匹配</p>
<p>%不能匹配用值NULL作为产品名的行<br>WHERE prod_name LIKE ‘%’</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2. _通配符</span><br></pre></td></tr></table></figure>
<p>下划线_匹配单个字符，不能多也不能少<br>SELECT prod_id,prod_name FROM products WHERE prod_name LIKE ‘_jet’;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 用正则表达式进行搜索</span><br><span class="line">正则表达式是用来匹配文本的特殊的串（字符集合）</span><br><span class="line">它的作用是匹配文本</span><br><span class="line">1. 基本字符匹配</span><br></pre></td></tr></table></figure>
<p>SELECT prod_name FROM products WHERE prod_name REGEXP ‘1000’ ORDER BY prod_name;</p>
<p>SELECT prod_name FROM products WHERE prod_name REGEXP ‘.000’ ORDER BY prod_name;//.表示匹配任意一个字符，1000和2000都匹配返回</p>
<p>LIKE用来匹配整个列值，REGEXP可以匹配部分列值，也可以匹配整个列值<br>REGEXP不区分大小写，可使用BINARY关键字区分大小写<br>SELECT prod_name FROM products WHERE prod_name REGEXP BINARY ‘JetPack.000’;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2. OR匹配</span><br></pre></td></tr></table></figure>
<p>.相当于_<br>|相当于OR<br>SELECT prod_name FROM products WHERE prod_name REGEXP ‘1000|2000’;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3. 匹配几个字符[] 另一种形式的OR</span><br></pre></td></tr></table></figure>
<p>[123] 匹配1或2或3的意思<br>SELECT prod_name FROM products WHERE prod_name REGEXP ‘[123] Ton’;<br>结果 1 ton /2 ton</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4. ^否定</span><br></pre></td></tr></table></figure>
<p>[^123]匹配除这些字符外的任何东西</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5. 匹配范围 -</span><br></pre></td></tr></table></figure>
<p>[0-9]=[0123456789]/[a-z]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6. 匹配特殊字符 .</span><br></pre></td></tr></table></figure>
<p>以\为前导,\-表示查找-,\.表示查找.<br>SELECT prod_name FROM products WHERE prod_name REGEXP ‘\.’;<br>转义escaping</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">7. 匹配多个实例</span><br></pre></td></tr></table></figure>
<p>SELECT prod_name FROM products WHERE prod_name REGEXP ‘\([0-9] sticks?\)’;//?表明它前面的s可以有可以无</p>
<p>SELECT prod_name FROM products WHERE prod_name REGEXP ‘[[:digit:]]{4}’;//相当于’[0-9][0-9][0-9][0-9]’</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">8. 定位符</span><br></pre></td></tr></table></figure>
<p>^ 文本的开始<br>$ 文本的结尾<br>[[:&lt;:]] 词的开始<br>[[:&gt;:]] 词的结尾</p>
<p>寻找以一个数开始的产品(包括小数点)<br>REGEXP ‘^[0-9\.]’</p>
<p>^放在[]外代表串的开始处，放在[^]里代表否定该集合</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 创建计算字段</span><br><span class="line">计算字段是运行时在SELECT语句内创建的,并不实际存在于数据库</span><br><span class="line">字段和列的意思基本相同，不过数据库列称为列，计算字段称为字段</span><br><span class="line"></span><br><span class="line">1. 拼接字段</span><br></pre></td></tr></table></figure>
<p>拼接concatenate 将值联结到一起构成单个值  使用Concat()函数<br>SELECT Concat(vend_name,’ (‘,vend_country,’)’) FROM vendors ORDER BY vend_name;</p>
<p>Concat()拼接串，即把多个串连接起来形成一个较长的串，用,分隔<br>RTrim() 删除数据右侧多余的空格来整理数据<br>SELECT Concat(RTrim(vend_name),’ (‘,vend_country,’)’) FROM vendors ORDER BY vend_name;<br>LTrim()去掉左边空格<br>Trim()去掉左右空格</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2. 别名 alias</span><br></pre></td></tr></table></figure>
<p>一个字段的替换名<br>AS关键字<br>SELECT Concat(RTrim(vend_name),’ (‘,vend_country,’)’) AS vend_title FROM vendors ORDER BY vend_name;</p>
<p>别名也称导出列</p>
<p>quantity*item_price AS expanded_price</p>
<p>SELECT Now() 返回当前日期和时间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 使用数据处理函数</span><br><span class="line">1. 文本处理函数</span><br></pre></td></tr></table></figure>
<p>SELECT vend_name,Upper(vend_name) AS vend_name_upcase FROM vendors ORDER BY vend_name;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">2. 日期和时间处理函数  </span><br><span class="line">格式yyyy-mm-dd  </span><br><span class="line">SELECT cust_id,order_num FROM orders WHERE order_date=&apos;2005-09-01&apos;;</span><br><span class="line">Date(order_date)=&apos;2005-09-01&apos;;  </span><br><span class="line">Date()指示仅提取列的日期部分  </span><br><span class="line">Date(order_date) BETWEEN &apos;2005-09-01&apos; AND &apos;2005-09-30&apos;;</span><br><span class="line"></span><br><span class="line">## 汇总数据（聚集函数）</span><br><span class="line">确定表中行数  </span><br><span class="line">获得表中行组的和  </span><br><span class="line">找出表列的最大值、最小值、平均值  </span><br><span class="line">**聚集函数** 运行在行组上，计算和返回单个值的函数</span><br></pre></td></tr></table></figure>
<p>AVG() 返回某列的平均值<br>COUNT() 返回某列的行数<br>MAX()<br>MIN()<br>SUM() 返回某列值之和</p>
<p>SELECT AVG(prod_price) AS avg_price FROM products WHERE prod_id=10;</p>
<p>AVG()只适用于单个列，AVG()函数忽略列值为NULL的行</p>
<p>COUNT(*) 不管列中包含的是NULL还是非空值，都计数<br>COUNT(column)对特定列计数，忽略NULL值</p>
<p>SELECT COUNT(*) AS num_cust FROM customers;</p>
<p>MAX()函数忽略列值为NULL的行<br>MIN()函数忽略列值为NULL的行</p>
<p>SELECT SUM(item_price*quantity) AS total_price FROM orderitems WHERE order_num=2005;<br>SUM()函数忽略列值为NULL的行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">只包含不同的值，指定DISTINCT参数</span><br><span class="line">SELECT AVG(DISTINCT prod_price) AS avg_price FROM products WHERE prod_id=10;  </span><br><span class="line">DISTINCT 不适用于COUNT(*) 必须指定列名</span><br><span class="line"></span><br><span class="line">**组合聚集函数**</span><br><span class="line">SELECT COUNT(*) AS num_items,MIN(prod_price) AS price_min,MAX(prod_price) AS price_max,AVG(prod_pice)AS price_avg FROM products;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 分组数据（GROUP BY子句 和 HAVING子句）</span><br><span class="line">分组把数据分为多个逻辑组，以便对每个组进行聚集计算</span><br><span class="line">**GROUP BY**</span><br></pre></td></tr></table></figure>
<p>对比理解<br>SELECT COUNT(<em>) AS num_prods FROM products WHERE prod_id=10;<br>SELECT prod_id,COUNT(</em>) AS num_prods FROM products GROUP BY prod_id;//这是对每个prod_id进行一个COUNT(*),对每个组而不是整个结果进行聚集</p>
<p>GROUP BY子句必须出现在WHERE子句之后，ORDER BY子句之前</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**HAVING**</span><br></pre></td></tr></table></figure>
<p>HAVING过滤分组，WHERE过滤行<br>HAVING在数据分组后进行过滤，WHERE在数据分组前进行过滤<br>WHERE排除的行不包括在分组中，这可能会改变计算值影响HAVING子句</p>
<p>列出至少由两个订单的所有顾客 GROUP BY 顾客 HAVING 订单&gt;=2<br>这用WHERE做不出来<br>SELECT cust_id,COUNT(<em>) AS orders FROM orders GROUP BY cust_id HAVING COUNT(</em>)&gt;=2;</p>
<p>WHERE和HAVING一起使用：返回过去12个月内下过的订单</p>
<p>列出具有2个以上，价格在10以上的产品的供应商<br>SELECT vend_id,COUNT(<em>) SA num_prods FROM products WHERE vend_price&gt;=10 GROUP BY vend_id HAVING COUNT(</em>)&gt;=2 ORDER BY num_prods;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**SELECT子句顺序**</span><br></pre></td></tr></table></figure>
<p>SELECT<br>FROM<br>WHERE<br>GROUP BY<br>HAVING<br>ORDER BY<br>LIMIT</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 子查询（嵌套在其他查询中的查询）</span><br><span class="line">子查询总是从内向外处理  </span><br><span class="line">SELECT cust_id FROM orders WHERE order_num IN(SELECT order_num FROM orderitems WHERE prod_id=&apos;TNT2&apos;);  </span><br><span class="line">作为计算字段使用子查询</span><br><span class="line">SELECT cust_name,cust_state,(SELECT COUNT(*) FROM orders WHERE orders.cust_id=customers.cust_id) AS orders FROM customers ORDER BY cust_name;</span><br><span class="line"></span><br><span class="line">## 联结表(join)</span><br><span class="line">外键(foreign key)一般是另一个表的主键（primary key)  </span><br><span class="line">分解数据为多个表能更有效地存储，更方便地处理</span><br><span class="line"></span><br><span class="line">维护引用完整性  </span><br><span class="line">联结是一种机制，用来在一条SELECT语句中关联表  </span><br><span class="line">**创建联结**</span><br></pre></td></tr></table></figure>
<p>SELECT vend_name,prod_name,prod_price<br>FROM vendors,products<br>WHERE vendors.vend_id=products.vend_id<br>ORDER BY vend_name,prod_name;<br>完全限定列名<br>将第一个表中的每一个行与第二个表中的每一个行配对，where子句作为过滤条件</p>
<p>笛卡尔积（caresian product) 没有联结条件时返回的结果为笛卡尔积，检索的行的数目将是第一个表中的行数乘以第二个表中的行数</p>
<p>应保证所有的联结都有WHERE子句</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**目前为止所用的联结称为等值联结它基于两个表之间的相等测试，也称为内部联结**</span><br></pre></td></tr></table></figure>
<p>与前面的意思相同，但FROM子句语法不同<br>SELECT vend_name,prod_name,prod_price<br>FROM vendors INNER JOIN products<br>ON vendors.vend_id=products.vend_id;</p>
<p>ANSI SQL规范首选INNER JOIN语法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**联结多个表**</span><br></pre></td></tr></table></figure>
<p>SELECT prod_name,vend_name,prod_price,quantity<br>FROM orderitems,products,vendors<br>WHERE products.vend_id=vendors.vend_id<br>AND orderitems.prod_id=products.prod_id<br>AND order_num=200;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 创建高级联结</span><br><span class="line">给表起别名，使用聚集函数  </span><br><span class="line">SELECT cust_name,cust_contact FROM customers AS c,orders AS o,orderitems AS oi WHERE c.cust_id=o.cust_id AND oi.order_num=o.order_num AND prod_id=&apos;TNT2&apos;;  </span><br><span class="line">//表别名不像列别名一样能返回到结果，只能在查询执行中使用  </span><br><span class="line">**等值联结**</span><br><span class="line">**自联结**</span><br></pre></td></tr></table></figure>
<p>自联结|子查询，前者速度更快<br>SELECT prod_id,prod_name<br>FROM products<br>WHERE vend_id=(SELECT vend_id<br>                FROM products<br>                WHERE prod_id=’DTNTR’);</p>
<p>SELECT p1.prod_id,p1.prod_name<br>FROM products AS p1,products AS p2<br>WHERE p1.vend_id=p2.vend_id<br>AND p2.prod_id=’DTNTR’;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**自然联结**</span><br></pre></td></tr></table></figure>
<p>INNER JOIN 返回所有的数据，甚至相同的列多次出现<br>自然联结排除多次出现，使每个列只返回一次</p>
<p>该联结通过对表使用通配符SELECT <em>,对所有其他表的列使用明确的子集来完成的<br>SELECT c.</em>,o.order_num,o.order_date,oi.prod_id,oi.quantity,oi.item_price<br>FROM customers AS c,orders AS o,orderitems AS oi<br>WHERE c.cust_id=o.cust_id<br>AND oi.order_num=o.order_num<br>AND prod_id=’FB’;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**外部联结**</span><br></pre></td></tr></table></figure>
<p>许多联结间一个表中的一行与另一个表中的行相关联，但有时候需要包含没有关联行的那些行</p>
<p>联结包含了那些在相关表中没有关联行的行，这种联结称为外部联结</p>
<p>内部联结（INNER JOIN）<br>SELECT customers.cust_id,orders.order_num<br>FROM customers INNER JOIN orders<br>ON customers.cust_id=orders.cust_id;</p>
<p>外部联结（OUTER JOIN)<br>SELECT customers.cust_id,orders.order_num<br>FROM customers LEFT OUTER JOIN orders<br>ON customers.cust_id=orders.cust_id;<br>检索所有用户，包括没订单的客户，其中会出现cust_id=1001,order_num=NULL的结果</p>
<p>LEFT OUTER JOIN表示从FROM子句的左边表中选择所有行<br>RIGHT OUTER JOIN 从右边选<br>左外部联结可通过颠倒表的顺序转换为右外部联结</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**使用带聚集函数的联结**</span><br></pre></td></tr></table></figure>
<p>SELECT customers.cust_name,<br>        customers.cust_id,<br>        COUNT(orders.order_num) AS num_ord<br>FROM customers INNER JOIN orders<br>ON customers.cust_id=orders.cust_id<br>GROUP BY customers.cust_id;</p>
<p>左外部联结会显示一个客户的订单数量为0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 组合查询(用UNION操作符将多条SELECT语句组合成一个结果集)</span><br></pre></td></tr></table></figure>
<p>也称为并（union）或复合查询（compound query）<br>任何具有多个WHERE子句的SELECT语句都可以作为一个组合查询给出</p>
<p>使用情况：<br>对单个表执行多个查询，按单个查询返回数据<br>在单个查询中从不同的表返回类似结构的数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**使用UNION**</span><br></pre></td></tr></table></figure>
<p>SELECT vend_id,prod_id,prod_price<br>FROM products<br>WHERE prod_price&lt;=5<br>UNION<br>SELECT vend_id,prod_id,prod_price<br>FROM products<br>WHERE vend_id IN (1001,1002);</p>
<p>等价于<br>WHERE prod_price&lt;=5 OR vend_id IN (1001,1002);</p>
<p>返回一个结果集<br>从多个表检索数据时UNION会更简单</p>
<p>UNION中的每个查询必须包含相同的列、表达式或聚集函数<br>UNION默认自动去除重复的行，使用UNION ALL而不是UNION改变它<br>UNION组合查询只能使用一条ORDER BY子句，且必须出现在最后一条SELECT语句之后<br>使用UNION的组合查询可以应用不同的表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 全文本搜索</span><br><span class="line">不是所有的数据库引擎都支持全文本搜索，MyTSAM支持,InnoDB不支持  </span><br><span class="line">通配符和正则表达式都存在重要的限制  </span><br><span class="line">MySQL创建指定列中各词的一个索引，搜索可以针对这些词进行  </span><br><span class="line">**启用全文本搜索支持**</span><br></pre></td></tr></table></figure>
<p>创建表时启用，CREATE TABLE 语句接收FULLTEXT子句，他给出被索引列的一个逗号分隔的列表<br>CREATE TABLE products<br>(<br>    note_id int NOT NULL AUTO_INCREMENT,<br>    prod_id char(10) NOT NULL,<br>    note_text text NULL,<br>    PRIMARY KEY(note_id),<br>    FULLTEXT(note_text)<br>)ENGING=MyISAM;<br>定义后，MySQL自动维护该索引。在增加、更新、删除行时，索引随之自动更新</p>
<p>应该先导入数据再修改表定义FULLTEXT,因为更新索引要花时间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**进行搜索**</span><br></pre></td></tr></table></figure>
<p>在索引后，使用函数Match()指定被索引的列和Against()指定要索引的内容<br>SELECT note_text<br>FROM products<br>WHERE Match(note_text) Against(‘rabbit’);<br>传给Match()的值必须与FULLTEXT()定义中的相同,如果指定多个列，则次序必须相同<br>搜索不区分大小写，除非使用BINARY<br>用LIKE  WHERE note_text LIKE ‘%rabbit%’;</p>
<p>全文本搜索会对结果排序，具有较高等级的行先返回</p>
<p>返回等级值(不含rabbit返回0)<br>SELECT note_text,Match(note_text) Against(‘rabbit’) AS rank<br>FROM products;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**查询扩展**</span><br></pre></td></tr></table></figure>
<p>扩大搜索范围<br>1.首先，进行一个基本的全文本搜索，找出匹配的所有行<br>2.从找出的所有行中找到有用的词<br>3.用这些词+原来的词再去匹配所有行</p>
<p>SELECT note_text<br>FROM products<br>WHERE Match(note_text) Against(‘anvils’ WITH QUERY EXPANSION);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**布尔文本搜索**</span><br></pre></td></tr></table></figure>
<p>1要匹配的词<br>2要排斥的词<br>3指定那些词等级更高<br>4表达式分组<br>5另外一个内容</p>
<p>SELECT note_text<br>FROM products<br>WHERE Match(note_text) Against(‘anvils’ IN BOOLEAN MODE);</p>
<p>为了匹配包含heavy但不包含rope的<br>SELECT note_text<br>FROM products<br>WHERE Match(note_text) Against(‘heavy -rope*’ WITH QUERY EXPANSION);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 插入数据 (INSERT语句)</span><br><span class="line">SELECT/INSERT/UPDATE/DELETE都是最常使用的SQL语句  </span><br><span class="line">INSERT **LOW_PRIORITY** INTO 降低INSERT语句的优先级，因为INSERT操作很耗时</span><br><span class="line"></span><br><span class="line">**插入完整的行**</span><br></pre></td></tr></table></figure>
<p>指定表名和插入到新行的值<br>INSERT INTO Customers<br>VALUES(NULL,’aaa’,’bbb’,’USA’,NULL,NULL);<br>第一列cust_id右MySQL自动增量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**插入行的一部分**</span><br></pre></td></tr></table></figure>
<p>还可以这样写，更安全<br>INSERT INTO Customers(cust_id,cust_name,cust_country,cust_zip,cust_city)<br>VALUES(NULL,’aaa’,’bbb’,’USA’,NULL,NULL);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**插入多行**</span><br></pre></td></tr></table></figure>
<p>INSERT INTO Customers<br>VALUES(NULL,’aaa’,’bbb’,’USA’,NULL,NULL),<br>(NULL,’ccc’,’ddd’,’USA’,NULL,NULL);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**插入某些查询的结果**</span><br></pre></td></tr></table></figure>
<p>将一条SELECT语句的结果插入表中</p>
<p>INSERT INTO customers<br>(cust_id,<br>cust_email,<br>cust_name,<br>cust_city)<br>SELECT cust_id,<br>       cust_email,<br>       cust_name,<br>       cust_city<br>FROM custnew;<br>要确保主键cust_id不一样，或者把它删了让系统自动填充</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 更新和删除数据</span><br><span class="line">**更新（修改）数据**</span><br></pre></td></tr></table></figure>
<p>要更新的表<br>列名和新值<br>更新行的过滤条件</p>
<p>更新特定行<br>*不要省略WHERE子句，不然很容易更新所有行<br>UPDATE products<br>SET cust_email=’123’<br>WHERE cust_id=100;</p>
<p>更新多个列<br>UPDATE products<br>SET cust_email=’123’,<br>    cust_name=’xiu’<br>WHERE cust_id=100;</p>
<p>发生错误也继续更新采用IGNORE关键字<br>UPDATE IGNORE products</p>
<p>删除某个列把它设置成NULL</p>
<p>更新所有行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**删除数据**</span><br></pre></td></tr></table></figure>
<p>删除整行<br>DELETE FROM products<br>WHERE cust_id=100;<br>不带WHERE子句全部清除</p>
<p>想删除指定的列使用UPDATE</p>
<p>删除的是表的内容但不是表本身</p>
<p>删除所有行使用TRUNCATE TABLE语句，TRUNCATE实际上是删除原来的表并重新创建一个表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 创建和操纵表(CREATE TABLE)</span><br></pre></td></tr></table></figure>
<p>1.新表的名字在CREATE TABLE后给出<br>2.表列的名字和定义用逗号分割<br>列名+列的数据类型</p>
<p>CREATE TABLE customers<br>(<br>    cust_id int NOT NULL AUTO_INCREMENT,<br>    cust_name char(50) NOT NULL,<br>    …,<br>    PRIMARY KEY(cust_id)<br>)ENDINE=InnoDB<br>MySQL语句忽略空格</p>
<p>创建新表时，指定的表明必须不存在</p>
<p>在不存在时创建它，在表名后加IF NOT EXISTS</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">所有列要么是NULL或者NOT NULL</span><br><span class="line">NULL是默认设置</span><br><span class="line">NULL是没有值，他不是空串,&apos;&apos;在NOT NULL列中是允许的,空串是一个有效的值，不是无值</span><br><span class="line"></span><br><span class="line">主键使用单个列或多个列则组合值必须唯一</span><br><span class="line">主键是唯一标志表中每个行的列，主键只能使用不允许NULL值的列。</span><br><span class="line"></span><br><span class="line">AUTO_INCREMENT告诉MySQL本列每增加一行时自动增量</span><br><span class="line"></span><br><span class="line">每个表制允许一个AUTO_INCREMENT列，而且它必须被索引（通过使它成为主键）</span><br><span class="line"></span><br><span class="line">SELECT last_insert_id 将返回最后一个AUTO_INCREMENT值</span><br></pre></td></tr></table></figure>
<p><strong>指定默认值</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">用DEFAULT关键字指定</span><br><span class="line"></span><br><span class="line">quantity int NOT NULL DEFAULT 1, 在未给出数量的情况下使用1</span><br><span class="line"></span><br><span class="line">引擎：InnorDB支持事物处理</span><br><span class="line">MEMORY 相当于MyISAM,数据存储在内存中，速度快</span><br><span class="line">MyISAM支持全文本搜索，但不支持事务处理</span><br></pre></td></tr></table></figure>

<p><strong>更新表定义</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE</span><br><span class="line"></span><br><span class="line">1. 添加一个列</span><br><span class="line">ALTER TABLE vendors</span><br><span class="line">ADD vend_phone CHAR(20);</span><br><span class="line"></span><br><span class="line">2. 删除刚添加的列</span><br><span class="line">ALTER TABLE vendors</span><br><span class="line">DROP COLUMN vend_phone;</span><br><span class="line"></span><br><span class="line">3.ALTER TABLE 常用来定义外键(constraint 约束)</span><br><span class="line">ALTER TABLE orderitems</span><br><span class="line">ADD CONSTRAINT fk_orderitems_orders</span><br><span class="line">FOREIGN KEY (order_num) REFERENCES orders(order_num);</span><br></pre></td></tr></table></figure>
<p><strong>删除表</strong><br>DROP TABLE customers;<br><strong>重命名表</strong><br>RENAME customers TO customer1,<br>       customer2 TO customer3;  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 创建新表</span><br><span class="line">ALTER TABLE 更改表列</span><br><span class="line">DROP TABLE 完整的删除一个表</span><br></pre></td></tr></table></figure>

<h2 id="使用视图"><a href="#使用视图" class="headerlink" title="使用视图"></a>使用视图</h2><p><strong>视图是虚拟的表</strong>，与包含数据的表不一样，视图只包含使用时动态检索数据的查询<br>作为视图，它不包含表中应该有的任何列或数据，它包含的是一个SQL查询<br><strong>使用视图</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">视图用CREATE VIEW语句来创建</span><br><span class="line">使用SHOW CREATE VIEW viewname;来查看创建视图的语句</span><br><span class="line">删除视图 DROP VIEW viewname;</span><br><span class="line">更新视图时，可以先用DROP再用CREATE，或CREATE OR REPLACE VIEW</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">创建一个productcustomers的视图</span><br><span class="line">CREATE VIEW productcustomers AS</span><br><span class="line">SELECT cust_name,cust_contact,prod_id</span><br><span class="line">FROM customers,orders,orderitems</span><br><span class="line">WHERE customers.cust_id=orders.cust_id</span><br><span class="line">AND orderitems.order_num=orders.order_num;</span><br><span class="line"></span><br><span class="line">使用视图</span><br><span class="line">SELECT cust_id,cust_name</span><br><span class="line">FROM productcustomers</span><br><span class="line">WHERE prod_id=&apos;TNT2&apos;;</span><br></pre></td></tr></table></figure>
<p><strong>视图是可更新的，可以使用INSERT\UPDATE和DELETE</strong><br>更新一个视图将更新其基表，因为视图本身没有数据，MySQL不能正确的确定被更新的基数据时，不允许更新（包括INSERT、DELETE）<br>有一下操作就不能进行更新<br>分组（GROUP BY和HAVING）<br>联结<br>子查询<br>并<br>聚集函数<br>DISTINCT<br>导出（计算）列  </p>
<p>一般视图是用来检索SELECT的，不用于更新，它包含的不是数据，是需要检索数据的查询  </p>
<h2 id="使用存储过程"><a href="#使用存储过程" class="headerlink" title="使用存储过程"></a>使用存储过程</h2><p><strong>存储过程就是为以后的使用而保存的一条或多条MySQL语句的集合，类似于批处理文件。特点：简单、安全、高性能，但它的创建权限可能会被限制，但允许使用存储过程</strong></p>
<ol>
<li><p>执行存储过程(调用=CALL)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CALL接受存储过程的名字以及传递给它的任意参数</span><br><span class="line"></span><br><span class="line">CALL productpricing(@pricelow,</span><br><span class="line">                    @pricehigh,</span><br><span class="line">                    @priceaverage);</span><br><span class="line">执行名为productpricing的存储过程，它计算并返回产品的最低、最高、平均价格</span><br><span class="line">存储过程可以显示结果，也可以不显示</span><br></pre></td></tr></table></figure></li>
<li><p>创建存储过程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE productpricing()</span><br><span class="line">BEGIN</span><br><span class="line">    SELECT Avg(prod_price) AS priceaverage</span><br><span class="line">    FROM products;</span><br><span class="line">END;</span><br><span class="line"></span><br><span class="line">接收参数的话再（）中列出</span><br><span class="line">BEGIN/END语句限定存储过程体</span><br><span class="line"></span><br><span class="line">使用MySQL命令行程序时，要把语句结束分隔符;暂时改成其他的（如//)，不然存储过程内容会出错</span><br><span class="line">使用DELIMITER （定界符）</span><br><span class="line"></span><br><span class="line">DELIMITER //</span><br><span class="line">CREATE PROCEDURE productpricing()</span><br><span class="line">BEGIN</span><br><span class="line">    SELECT Avg(prod_price) AS priceaverage</span><br><span class="line">    FROM products;</span><br><span class="line">END//</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line">除\符号，其他都可作为语句分隔符</span><br><span class="line"></span><br><span class="line">CALL productpricing();</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除存储过程<br>DROP PROCEDURE productpricing;//后面无（），只有过程名<br>仅当存在时删除 DROP PROCEDURE IF EXISTS</p>
</li>
<li><p>使用参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">变量 内存中一个特定的位置，用来临时存储数据</span><br><span class="line"></span><br><span class="line">OUT指出该参数用来从存储过程传出一个值（给调用者</span><br><span class="line">IN（传给存储过程</span><br><span class="line">INOUT（传入传出</span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE productpricing(</span><br><span class="line">    OUT p1 DECIMAL(8,2),</span><br><span class="line">    OUT ph DECIMAL(8,2),</span><br><span class="line">    OUT pa DECIMAL(8,2),</span><br><span class="line">    IN number INT</span><br><span class="line">)</span><br><span class="line">BEGIN</span><br><span class="line">    SELECT Min(...)</span><br><span class="line">    INTO p1</span><br><span class="line">    FROM ...;</span><br><span class="line">    SELE...</span><br><span class="line">    ...</span><br><span class="line">END</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CALL productpricing(@...,@...,@priceaverage,1234);</span><br><span class="line"></span><br><span class="line">//检索平均价格</span><br><span class="line">SELECT @priceaverage;</span><br></pre></td></tr></table></figure>
</li>
<li><p>智能存储过程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">186</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="安全管理"><a href="#安全管理" class="headerlink" title="安全管理"></a>安全管理</h2><ol>
<li>访问控制<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">用户应该对它们需要的数据具有适当的访问权</span><br><span class="line"></span><br><span class="line">MySQL创建一个名为root的用户账号，他对整个服务器有完全的控制，再现实工作中应该创建一系列账号，有的用于管理，有的给开发人员使用</span><br></pre></td></tr></table></figure></li>
<li>管理用户<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">MySQL用户账号和信息存储再名为mysql的数据库中，mysql中有一个名为user的表，它包含所有用户账号，user表有一列名为user的列，它存储用户登录名</span><br><span class="line"></span><br><span class="line">USE mysql;</span><br><span class="line">SELECT user FROM user;</span><br><span class="line"></span><br><span class="line">创建用户账号</span><br><span class="line">CREATE USER kang IDENTIFIED BY &apos;p@ssword&apos;;</span><br><span class="line">指定散列口令 IDENTIFIED BY PASSWORD</span><br><span class="line">IDENTIFIED BU 指定的口令为纯文本</span><br><span class="line"></span><br><span class="line">使用GRANT和INSERT GRANT语句也可以创建用户账户，但CREATE USER是最清晰的</span><br><span class="line"></span><br><span class="line">重命名账户</span><br><span class="line">RENAME kang TO liu;</span><br><span class="line"></span><br><span class="line">删除用户账号</span><br><span class="line">DROP USER kang;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">看到用户账号的权限</span><br><span class="line">SHOW GRANTS FOR kang; 结果 GRANT USAGE on *.* TO ...</span><br><span class="line">USAGE表示没有任何权限</span><br><span class="line"></span><br><span class="line">用户定义为user@host</span><br></pre></td></tr></table></figure></li>
<li>设置权限<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">使用GRANT语句</span><br><span class="line"></span><br><span class="line">要授予的权限</span><br><span class="line">被授予访问权限的数据库和表</span><br><span class="line">用户名</span><br><span class="line"></span><br><span class="line">GRANT SELECT ON crashcourse.* TO kang;//允许用户在crashcourse数据库的所有表上使用SELECT访问权限</span><br><span class="line"></span><br><span class="line">取消权限REVOKE</span><br><span class="line">REVOKE SELECT ON crashcourse.* FROM kang;</span><br></pre></td></tr></table></figure>


</li>
</ol>
<h2 id="串数据类型"><a href="#串数据类型" class="headerlink" title="串数据类型"></a>串数据类型</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">定长串/变长串</span><br><span class="line"></span><br><span class="line">CHAR</span><br><span class="line"></span><br><span class="line">ENUM</span><br><span class="line">LONGTEXT</span><br><span class="line">MEDIUMTEXT</span><br><span class="line">SET</span><br><span class="line">TEXT</span><br><span class="line">TINYTEXT</span><br><span class="line">VARCHAR</span><br></pre></td></tr></table></figure>

<h2 id="数值数据类型"><a href="#数值数据类型" class="headerlink" title="数值数据类型"></a>数值数据类型</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">除BIT和BOOLEAN外都可以有符号或无符号（UNSIGNED课存储两倍大小的值）</span><br><span class="line"></span><br><span class="line">BIT</span><br><span class="line">BIGINT</span><br><span class="line">BOOLEAN</span><br><span class="line">DECIMAL 精度可变的浮点值，存储货币一般使用DECIMAL(8,2)</span><br><span class="line">DOUBLE</span><br><span class="line">FLOAT</span><br><span class="line">INT</span><br><span class="line">MEDIUMINT</span><br><span class="line">REAL 4字节的浮点值</span><br><span class="line">SMALLINT</span><br><span class="line">TINYINT</span><br></pre></td></tr></table></figure>

<h2 id="日期和时间数据类型"><a href="#日期和时间数据类型" class="headerlink" title="日期和时间数据类型"></a>日期和时间数据类型</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DATE 格式为YYYY-MM-DD</span><br><span class="line">DATETIME</span><br><span class="line">TIMESTAMP 功能与DATETIME相同，但范围小</span><br><span class="line">TIME 格式为HH:MM:SS</span><br><span class="line">YEAR 2位或4位数字表示</span><br></pre></td></tr></table></figure>

<h2 id="二进制数据类型"><a href="#二进制数据类型" class="headerlink" title="二进制数据类型"></a>二进制数据类型</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">BLOB</span><br><span class="line">MEDIUMBLOB</span><br><span class="line">LONGBLOB</span><br><span class="line">TINYBLOB</span><br></pre></td></tr></table></figure>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/11/06/%E5%AE%8C%E5%85%A8%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E6%B1%82%E8%A7%A3/" rel="next" title="完全背包问题求解">
                <i class="fa fa-chevron-left"></i> 完全背包问题求解
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Kang Liu Rong</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#WHERE子句操作符"><span class="nav-number">1.</span> <span class="nav-text">WHERE子句操作符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#使用视图"><span class="nav-number">1.1.</span> <span class="nav-text">使用视图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用存储过程"><span class="nav-number">1.2.</span> <span class="nav-text">使用存储过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安全管理"><span class="nav-number">1.3.</span> <span class="nav-text">安全管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#串数据类型"><span class="nav-number">1.4.</span> <span class="nav-text">串数据类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数值数据类型"><span class="nav-number">1.5.</span> <span class="nav-text">数值数据类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#日期和时间数据类型"><span class="nav-number">1.6.</span> <span class="nav-text">日期和时间数据类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二进制数据类型"><span class="nav-number">1.7.</span> <span class="nav-text">二进制数据类型</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kang Liu Rong</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
